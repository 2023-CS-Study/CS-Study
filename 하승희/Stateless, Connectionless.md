# Stateless와 Connectionless

## Stateless

- 클라이언트와 서버 간의 상태를 유지하지 않는다는 것을 의미합니다.
- 클라이언트가 요청을 보낼 때마다 서버는 그 요청에 대한 응답을 보내며, 그 이후에는 클라이언트와의 상태를 유지하지 않습니다.
- 따라서 각각의 요청은 이전에 무엇이 들어왔는지에 대한 정보없이 독립적으로 처리됩니다.

### 특징

- 서버의 확장성을 높이고, 클라이언트와 서버의 결합도를 낮춰줍니다.
- 하지만 트랜잭션 중간에 발생하는 오류나 메시지 손실을 감지하거나 복구할 수 없기 때문에 신뢰성이나 보안성이 떨어질 수 있습니다.
- 이러한 특성 때문에 클라이언트와 서버 간의 세션을 유지하기 위한 추가 작업이 필요합니다. 예를 들어, 쇼핑몰에서 장바구니에 물건을 담고 결제를 진행하려면, 클라이언트와 서버 간의 상태를 유지해야 합니다. 이를 위해서는 쿠키(cookie)나 세션(session)과 같은 메커니즘을 사용합니다.

### 대표적인 예시

- 웹 브라우징에 사용되는 하이퍼텍스트 전송 프로토콜(HTTP)
    - HTTP를 사용하여 웹 페이지에 액세스할 때 리소스(예: 이미지 또는 스크립트)에 대한 각 요청은 이전 요청에서 전달되는 정보가 없는 별도의 트랜잭션으로 처리됩니다.

## Connectionless

- 클라이언트가 요청을 보내면 서버는 그에 대한 응답을 보내고 연결을 끊습니다. 그리고 다음 요청이 들어오면 새로운 연결을 맺어 응답을 보냅니다.
- 전용 통신 경로나 가상 회로를 설정하지 않고 데이터를 독립적인 패킷으로 전송하는 통신 모드를 말합니다.
- 즉, 각 패킷은 독립적으로 전송되며 이전 또는 이후의 패킷과 다른 경로를 통해 네트워크를 통과할 수 있습니다.

### 특징

- 가상 회로를 설정하고 유지하는 오버헤드가 필요하지 않기 때문에 빠르고 효율적입니다.
- 그러나 패킷이 손실되거나 지연될 수 있고 전송 또는 순서를 보장할 수 없기 때문에 신뢰성이나 보안성이 떨어질 수 있습니다.
- 또한 각 요청과 응답마다 3-way handshake를 통해 연결을 진행해야 했으므로 시간과 서버 자원이 낭비되는 문제가 있습니다.
    - 이를 보완하기 위해 HTTP/1.1 버전부터는 클라이언트의 별도 언급이 없다면 요청을 기본적으로 Keep-Alive로 취급하여 지속 연결(Persistent Connection)하는 방식을 사용합니다.

### 대표적인 예시

- 웹 브라우징에 사용되는 하이퍼텍스트 전송 프로토콜(HTTP)
- 온라인 게임 및 화상 회의와 같은 실시간 애플리케이션에 사용되는 사용자 데이터그램 프로토콜(UDP)
    - UDP를 사용하여 메시지를 보내면 핸드셰이킹이나 오류 확인 없이 메시지가 패킷으로 나뉘어 네트워크를 통해 전송됩니다.

---
> 🔍 Stateful보다 Stateless가 더 좋나요?

- 대부분의 경우, Stateful과 비교했을 때 Stateless가 더 나은 옵션이지만 결국 모든 것은 사용자의 요구사항에 따라 달라집니다.
- 신속하고 일시적인 방식으로만 정보가 필요한 경우, Stateless가 적합합니다.
- 반면에 앱에서 한 세션에서 다음 세션으로 넘어갈 때 발생하는 일에 대해 더 많은 메모리가 필요한 경우에는 Stateful이 더 적합할 수 있습니다.

> 🔍 HTTP과 REST API는 상태 저장 방식인가요, 아니면 상태 비저장 방식인가요?

- HTTP는 상태 정보를 추적하지 않기 때문에 상태 비저장 방식입니다. HTTP에서는 각 주문이나 요청이 그 자체로 수행되며, 그 이전의 요청을 인식하지 못합니다.
- REST API는 서버가 이전 요청을 기억하는 대신 각 요청에 서버가 이해하는 데 필요한 모든 정보를 포함해야 하기 때문에 상태 비저장형입니다.

> 🔍 HTTP는 Persistence connection이 가능한데 왜 Stateless인가요?

- HTTP persistence connection은 해당 HTTP 메시지를 주고받기 위한 TCP connection을 유지하여 3-way handshake를 불필요하게 다시 맺지 않아도 되게 함이지 HTTP의 연결이나 내용 자체를 유지하는 것이 아닙니다.
- 따라서 각각의 HTTP 메시지에 대해서는 독립적인 단위로 처리합니다.

---
### Reference

- [모든 개발자를 위한 HTTP 웹 기본 지식](https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard)