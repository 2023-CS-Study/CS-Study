# Classless Inter-Domain Routing (CIDR)
## 기존의 IP 주소 할당 방식: 클래스

### 개념

|  클래스   | Leading Bits  |  네트워크 ID 비트  |  호스트 ID 비트   |   총 네트워크 수   |  네트워크당 주소 수  |
|:------:|:-------------:|:------------:|:------------:|:------------:|:------------:|
| 클래스 A  |       0       |      8       |      24      |     128      |  16,777,214  |
| 클래스 B  |      10       |      16      |      16      |    16,384    |    65,534    |
| 클래스 C  |      110      |      24      |      8       |  2,097,152   |     254      |
| 클래스 D  |     1110      | NOT DEFINED  | NOT DEFINED  | NOT DEFINED  | NOT DEFINED  |
| 클래스 E  |     1111      | NOT DEFINED  | NOT DEFINED  | NOT DEFINED  | NOT DEFINED  |
- 각 클래스에는 유효한 IP 주소 범위가 있으며, 클래스 D와 E는 각각 멀티캐스트 및 실험용으로 예약되어 있습니다.
- 첫 번째 옥텟의 비트 순서에 따라 IP 주소의 클래스가 결정됩니다.
- IP 주소의 클래스는 네트워크 ID와 호스트 ID에 사용되는 비트와 특정 클래스에서 가능한 총 네트워크 및 호스트 수를 결정하는 데 사용됩니다.

### 한계점

- 각 클래스별로 할당할 수 있는 호스트의 개수 차이가 컸기 때문에 많은 호스트 주소가 낭비되는 문제
    - 대부분의 사이트들은 "클래스 C"에 들어가기에는 너무 컸고, 대신 "클래스 B"를 할당받았습니다.
    - 예를 들어, “클래스 B”를 할당받고 1,000개의 호스트만 사용한다면 남은 호스트 주소는 낭비되는 것입니다.
- 인터넷의 빠른 발전과 함께, 클래스 B의 가능한 주소는(기본적으로 214 즉 약 16,000개) 급속도로 소진되어 갔습니다.
- 이러한 문제가 있기 때문에 1993년에 클래스 없는 도메인 간 라우팅(CIDR)으로 대체되었습니다.

## CIDR(Classless Inter-Domain Routing)

### 개념

- 기존의 IP 주소 할당 방식이었던 네트워크 클래스를 대체하는 `클래스 없는 도메인 간 라우팅 기법` 입니다.

### 특징

- CIDR은 가변 길이 서브넷 마스크(VLSM)를 사용하여 IP 주소 공간을 더 작은 주소 블록으로 나누기 때문에 IP 주소를 더 유연하게 할당할 수 있습니다.
    - 네트워크 / 호스트 구분이 어느 부분에서나 가능합니다.
- 또한 클래스 A, B, C와 같은 고정된 네트워크 클래스가 필요하지 않습니다.
- 다양한 크기의 서브넷이 많은 네트워크에서 IP 주소를 보다 효율적으로 사용할 수 있습니다.
- 또한 라우터가 여러 IP 접두사를 단일 경로로 통합하여 라우팅 테이블의 크기를 줄임으로써 라우팅을 간소화할 수 있습니다.

### CIDR Block

- IP 주소 구성 : `network prefix(subnet id)` + `host id`
- IP 주소 표현 : `A.B.C.D/N`

    - ex) 10.0.1.0/24, 172.16.0.0/12
    - A.B.C.D: 4개의 8비트 단위 바이트로 이루어진 32비트 이진 숫자
    - N: prefix(접두어) 길이를 나타내는 0~32 사이의 정수, 주소의 왼쪽으로부터 세어서 공유하는 초기 비트의 수
    - 만약 이진 형태로 변화한 IP 주소의 첫 자리 비트에서 CIDR 접두어 N비트 길이만큼 일치한다면, 해당 IP 주소는 CIDR 블록의 일부라고 하며, CIDR 접두어와 일치한다고 합니다.

### CIDR 예시

```
192.168.2.0/24
```

- CIDR 표기법은 단일 IP 주소 뒤에 슬래시(/)와 서브넷 마스크의 비트 수를 사용하여 네트워크 주소와 관련 서브넷 마스크를 표현합니다.
- 예를 들어 서브넷 마스크가 255.255.255.0(또는 CIDR 표기법에서는 /24)인 경우,
    - 네트워크 부분 = IP 주소의 처음 24비트
    - 호스트 부분 = 나머지 8비트(32-24)
- 호스트 주소 비트만큼 IP 주소를 보유할 수 있습니다.
    - 즉 2^8 = 256개의 IP 주소 보유
    - 192.168.2.0 ~ 192.168.2.255 까지 총 256개 주소를 의미

---

### Reference

- [CIDR](https://ko.wikipedia.org/wiki/CIDR)
- [사이더(CIDR) 란 무엇인가?](https://www.nakjunizm.com/2020/01/29/Cidr/)